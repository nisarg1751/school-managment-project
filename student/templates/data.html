{% extends 'base.html' %}
{% block content %}
<a href="{% url 'signup' %}" class="btn btn-primary btn-sm">Add student</a>
<a href="{% url 'userchange' %}">Edit your form</a>
<a href="{% url 'logout' %}" class="btn btn-warning">Logout</a>
<form action="{% url 'data' %}" method="post">
    {% csrf_token %}
    <input type="search" name="search" id="">
    <input type="submit" value="search">
</form>
<table class="table table-striped">
    <thead>
        <tr>
            <th scope="col">Id</th>
            <th scope="col">Username</th>
            <th scope="col">First-name</th>
            <th scope="col">Last-name</th>
            <th scope="col">Email</th>
        </tr>
    </thead>
    {% if search %}
    {% for i in search %}
    <tr>
        <th scope="row">{{i.id}}</th>
        <td>{{i.username}}</td>
        <td>{{i.first_name}}</td>
        <td>{{i.last_name}}</td>
        <td>{{i.email}}</td>
        <td>
            <a href="{% url 'userdata' i.id %}" class="btn btn-primary btn-sm">Edit</a>
            <a href="{% url 'marks' i.id %}" class="btn btn-primary btn-sm">Marks</a>
            <form action="{% url 'deletedata' i.id  %}" method="post" class="d-inline">
                {% csrf_token %}
                <input type="submit" class="btn btn-danger btn-sm" value="Delete">
            </form>
        </td>
    </tr>
    {% endfor %}
    
    <a href="{% url 'data' %}" class="btn btn-danger">Back</a>
    {% endif %}

    <tbody>
        {% if x.is_superuser %}
        {% for i in user %}
        <tr>
            <th scope="row">{{i.id}}</th>
            <td>{{i.username}}</td>
            <td>{{i.first_name}}</td>
            <td>{{i.last_name}}</td>
            <td>{{i.email}}</td>
            <td>
                <a href="{% url 'userdata' i.id %}" class="btn btn-primary btn-sm">Edit</a>
                <a href="{% url 'marks' i.id %}" class="btn btn-primary btn-sm">Marks</a>
                <form action="{% url 'deletedata' i.id  %}" method="post" class="d-inline">
                    {% csrf_token %}
                    <input type="submit" class="btn btn-danger btn-sm" value="Delete">
                </form>
            </td>
        </tr>
        
        {% endfor %}
        {% else %}
        {% for i in user1 %}
        <tr>
            <th scope="row">{{i.id}}</th>
            <td>{{i.username}}</td>
            <td>{{i.first_name}}</td>
            <td>{{i.last_name}}</td>
            <td>{{i.email}}</td>
            <td>
                <a href="{% url 'userdata' i.id %}" class="btn btn-primary btn-sm">Edit</a>
                <a href="{% url 'marks' i.id %}" class="btn btn-primary btn-sm">Marks</a>
                <form action="{% url 'deletedata' i.id  %}" method="post" class="d-inline">
                    {% csrf_token %}
                    <input type="submit" class="btn btn-danger btn-sm" value="Delete">
                </form>
            </td>
        </tr>
        {% endfor %}
        {% endif %}
    </tbody>
</table>
{% if messages %}
<ul class="messages">
    {% for message in messages %}
    <li {% if message.tags %} class=" {{ message.tags }} " {% endif %}> {{ message }} </li>
    {% endfor %}
</ul>
{% endif %}

    <div>
        <p style="text-align:center;"> page:{{page_num}}/{{c}}</p>
        <nav aria-label="Page navigation example">
            <ul class="pagination justify-content-center">
            <li class="page-item"> 
            {% if user.has_previous %}
            <a  class="page-link" href="{% url 'data' %}?page={{user.previous_page_number}}">Previous page</a>
            {% endif %} 
          </li>
          {% for i in d %}
          {% if d == i %}
          <li class="page-item active"><a class="page-link" href="{% url 'data' %}?page={{i}}">{{i}}</a></li>
          {% else %}
          <li class="page-item"><a class="page-link" href="{% url 'data' %}?page={{i}}">{{i}}</a></li>
          {% endif %}
          {% endfor %}
          {% if user.has_next %}
          <a  class="page-link" href="{% url 'data' %}?page={{user.next_page_number}}">Next page</a>
          {% endif %}
        </ul>
<!-- {% if search %}
      <table class="table table-striped">
          <thead>
              <tr>
                  <th scope="col">Id</th>
                  <th scope="col">Username</th>
                  <th scope="col">First-name</th>
                  <th scope="col">Last-name</th>
                  <th scope="col">Email</th>
              </tr>
          </thead>
      {% for i in search %}
              <tr>
                  <th scope="row">{{i.id}}</th>
                  <td>{{i.username}}</td>
                  <td>{{i.first_name}}</td>
                  <td>{{i.last_name}}</td>
                  <td>{{i.email}}</td>
                  <td>
                      <a href="{% url 'userdata' i.id %}" class="btn btn-primary btn-sm">Edit</a>
                      <a href="{% url 'marks' i.id %}" class="btn btn-primary btn-sm">Marks</a>
                      <form action="{% url 'deletedata' i.id  %}" method="post" class="d-inline">
                          {% csrf_token %}
                          <input type="submit" class="btn btn-danger btn-sm" value="Delete">
                      </form>
                  </td>
              </tr>
              {% endfor %}
              <a href="{% url 'data' %}" class="btn btn-danger">Back</a>
      
{% endif %} -->
<!-- {% if search %}
<table class="table table-striped">
    <thead>
        <tr>
            <th scope="col">Id</th>
            <th scope="col">Username</th>
            <th scope="col">First-name</th>
            <th scope="col">Last-name</th>
            <th scope="col">Email</th>
        </tr>
    </thead>
{% for i in search %}
        <tr>
            <th scope="row">{{i.id}}</th>
            <td>{{i.username}}</td>
            <td>{{i.first_name}}</td>
            <td>{{i.last_name}}</td>
            <td>{{i.email}}</td>
            <td>
                <a href="{% url 'userdata' i.id %}" class="btn btn-primary btn-sm">Edit</a>
                <a href="{% url 'marks' i.id %}" class="btn btn-primary btn-sm">Marks</a>
                <form action="{% url 'deletedata' i.id  %}" method="post" class="d-inline">
                    {% csrf_token %}
                    <input type="submit" class="btn btn-danger btn-sm" value="Delete">
                </form>
            </td>
        </tr>
        {% endfor %}

{% else %}
<h1>No match found</h1>
{% endif %}
<a href="{% url 'data' %}" class="btn btn-danger">Back</a> -->

{% endblock content %}